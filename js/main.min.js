function l(e){console.log(e)}function ifLargeImages(){return $(window).width()>largeImagesTriggerWidth?!0:!1}function closeAllPosts(){$(".home-post").removeClass("active"),$(".post-main").each(function(e,i){i.style.height=""}),$(".home-video-player").html(""),$(".post-copy").slideUp(fastAnimationSpeed)}function router(e,i){if("director"===e)if($(".director-menu-item").removeClass("active"),"play-all"===i)overlayVimeoPlayer.load($(".director-showreel-video").eq(0).data(),0);else if(0===i.indexOf("showreel-")){var a=i.substring(9),o=$('.director-showreel-video[data-slug="'+a+'"]');o&&overlayVimeoPlayer.load(o.data(),o.index())}else 0===i.indexOf("video-")||"archive"===i?("archive"!==$("#director-menu").attr("data-active")?(inlineVimeoPlayer.close(),$(".director-section").slideUp(basicAnimationSpeed),$("#director-archive").slideDown(basicAnimationSpeed),$("#director-menu").attr("data-active","archive")):"archive"===i&&inlineVimeoPlayer.close(),0===i.indexOf("video-")&&(inlineVimeoPlayer.load($("#director-archive-"+i)),$("#vimeo-player").slideDown(basicAnimationSpeed),$("#director-menu").attr("data-active","archive")),$("#director-menu-archive").addClass("active")):"biography"===i?(inlineVimeoPlayer.close(),$(".director-section").slideUp(basicAnimationSpeed),$("#director-biography").slideDown(basicAnimationSpeed),$("#director-menu").attr("data-active","biography"),$("#director-menu-biography").addClass("active")):(inlineVimeoPlayer.close(),$("#director-menu").attr("data-active",""),$(".director-section").slideUp(basicAnimationSpeed),$("#director-showreel").slideDown(basicAnimationSpeed))}function initializeMap(){var e=new google.maps.LatLng(51.513748,-.139104),i={center:e,zoom:14,scrollwheel:!1,styles:[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#01bcec"},{visibility:"on"}]}]},a=new google.maps.Map(document.getElementById("map-canvas"),i),o=$("#map-copy").html(),t=new google.maps.InfoWindow({content:o}),r=new google.maps.Marker({position:e,map:a,icon:wp_variables.themeUrl+"/img/optimized/ns-mapmarker.png"});t.open(a,r),google.maps.event.addListener(r,"click",function(){t.open(a,r)}),$("#map-canvas").height(.5*$(window).height())}function layoutFixSearchInput(){var e=$("#search-form").width(),i=$("#search-label").width();$("#search-input").width(e-i-20)}var largeImagesTriggerWidth=700,basicAnimationSpeed=600,fastAnimationSpeed=200,scrollTimer,lazyHomeBackground=$(".js-lazy-home-background"),lazyThumbnails=$(".lazy-thumb"),lazyBackgrounds=$(".js-lazy-background"),directorShowreelVideos=$(".director-showreel-video"),directorShowreelLength=directorShowreelVideos.length,sidebar=$("#sidebar"),sidebarButton=$("#sidebar-toggle"),tagFilters=$(".filter-tag"),tagFilterTimeout,tagFilterTimeout2,directorArchiveVideos=$(".director-archive-video"),overlayVimeoPlayer={player:$("#video-overlay-player"),overlay:$("#video-overlay"),overlayInner:$("#video-overlay-inner"),overlayDirector:$("#video-overlay-director"),overlayTitle:$("#video-overlay-title"),overlayMiddot:$("#video-overlay-middot"),overlayBrand:$("#video-overlay-brand"),timeout:0,load:function(e,i){var a;a=void 0===e.vimeoRatio?.5625:e.vimeoRatio,this.overlay.fadeIn(fastAnimationSpeed).data("now-playing",i),this.player.html('<iframe id="overlay-vimeo-player-embed" src="//player.vimeo.com/video/'+e.vimeoId+'?api=1&autoplay=1&badge=0&byline=0&portrait=0&player_id=overlay-vimeo-player-embed" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>').css({"padding-top":100*a+"%"}),this.overlayDirector.html(e.director),this.overlayTitle.html(e.title),this.overlayBrand.html(e.brand),this.overlayMiddot.show(),(""===e.title||""===e.brand)&&this.overlayMiddot.hide();var o=this;this.timeout=setTimeout(function(){o.fixHeight()},basicAnimationSpeed+fastAnimationSpeed+1),$(window).resize(function(){this.timeout=setTimeout(function(){o.fixHeight()},50)});var t=$("#overlay-vimeo-player-embed")[0],r=$f(t);r.addEvent("ready",function(){r.addEvent("finish",function(){this.playNext()})})},playNext:function(){var e=this.overlay.data("now-playing"),i=e+1;directorShowreelLength>i?this.load(directorShowreelVideos.eq(i).data(),i):this.load(directorShowreelVideos.eq(0).data(),0)},playPrev:function(){var e=this.overlay.data("now-playing"),i=e-1;-1===i?this.load(directorShowreelVideos.eq(directorShowreelLength-1).data(),directorShowreelLength-1):this.load(directorShowreelVideos.eq(i).data(),i)},close:function(){this.overlay.fadeOut(fastAnimationSpeed).data("now-playing",""),this.player.html("")},fixHeight:function(){for(var e=$(window).height(),i=this.overlayInner.height();i>.95*e;)this.overlayInner.width(.95*this.overlayInner.width()),i=this.overlayInner.height()}},inlineVimeoPlayer={player:$("#vimeo-player"),load:function(e){var i=e.data(),a=i.vimeoRatio;void 0===a&&(a=.5625),this.player.data("now-playing-id",e[0].id).html('<iframe id="inline-vimeo-player-embed" src="//player.vimeo.com/video/'+i.vimeoId+'?api=1&autoplay=1&badge=0&byline=0&portrait=0&player_id=inline-vimeo-player-embed" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>').css({"padding-top":100*a+"%"}),$("html").addClass("cinema-mode"),$("#main-content").ScrollTo();var o=$("#inline-vimeo-player-embed")[0],t=$f(o);t.addEvent("ready",function(){t.addEvent("finish",function(){inlineVimeoPlayer.playNext()})})},playNext:function(){var e,i=this.player.data("now-playing-id"),a=$(".director-archive-video:visible"),o=a.length;a.each(function(a,o){i===$(o)[0].id&&(e=a)}),this.load(void 0===e||e===o-1?$(a[0]):$(a[e+1]))},playPrev:function(){var e,i=this.player.data("now-playing-id"),a=$(".director-archive-video:visible"),o=a.length;a.each(function(a,o){i===$(o)[0].id&&(e=a)}),this.load(void 0===e?$(a[0]):0===e?$(a[o-1]):$(a[e-1]))},close:function(){$("html").removeClass("cinema-mode"),this.player.html("").css({"padding-top":"0%"}).data("now-playing","")}};$("#map-canvas").length&&google.maps.event.addDomListener(window,"load",initializeMap),$(document).ready(function(){if(layoutFixSearchInput(),lazyHomeBackground.length&&lazyHomeBackground.each(function(e,i){var a=$(i).data("background"),o=$(i).data("background-large");$(i).css(ifLargeImages()?{"background-image":"url("+o+")"}:{"background-image":"url("+a+")"})}),lazyThumbnails.length&&lazyThumbnails.each(function(e,i){var a=$(i).data("thumb"),o=$(i).data("thumb-large");ifLargeImages()?$(i).attr("src",o):$(i).attr("src",a)}),lazyBackgrounds.length&&lazyBackgrounds.each(function(e,i){var a=$(i).data("thumb"),o=$(i).data("thumb-large");$(i).css(ifLargeImages()?{"background-image":"url("+o+")"}:{"background-image":"url("+a+")"})}),$(".post-copy-close").on("click",function(e){e.preventDefault(),$(this).parent(".post-copy").parent().removeClass("active"),closeAllPosts()}),$(".home-video .post-main").on("click",function(e){e.preventDefault(),closeAllPosts();var i=$(this).parent(),a=i.data("vimeo-id"),o=i.data("video-ratio");0===o&&(o=.5625);var t=i.width()*o;i.addClass("active"),i.find(".post-copy").slideDown(fastAnimationSpeed),i.find(".post-main").height(t),i.find(".home-video-player").height(t).html('<iframe id="home-vimeo-embed" width="100%" height="100%" src="//player.vimeo.com/video/'+a+'?api=1&autoplay=1&badge=0&byline=0&portrait=0&player_id=home-vimeo-embed" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>');var r=$("#home-vimeo-embed")[0],l=$f(r);l.addEvent("ready",function(){l.addEvent("finish",function(){i.find(".home-video-player").html("")})}),scrollTimer=setTimeout(function(){i.ScrollTo()},basicAnimationSpeed)}),$(".news-read-more .post-main").on("click",function(e){e.preventDefault(),closeAllPosts();var i=$(this).parent();i.find(".post-copy").slideDown(fastAnimationSpeed),i.addClass("active"),scrollTimer=setTimeout(function(){i.ScrollTo()},fastAnimationSpeed+10)}),$(".js-load-overlay-vimeo").on("click",function(){overlayVimeoPlayer.load($(this).data(),$(this).index())}),$("#video-overlay-close").on("click",function(){overlayVimeoPlayer.close()}),$("#video-overlay-next").on("click",function(){overlayVimeoPlayer.playNext()}),$("#video-overlay-previous").on("click",function(){overlayVimeoPlayer.playPrev()}),$("#inline-player-next").on("click",function(){inlineVimeoPlayer.playNext()}),$("#inline-player-previous").on("click",function(){inlineVimeoPlayer.playPrev()}),tagFilters.each(function(){var e=$(this).data("tag-slug");"all"!=e&&0===$(".tag-"+e).length&&$(this).remove()}),tagFilters.on("click",function(){tagFilters.removeClass("filter-tag-active"),$(this).addClass("filter-tag-active");var e=$(this).data("tag-slug");"all"!==e?(clearTimeout(tagFilterTimeout),clearTimeout(tagFilterTimeout2),directorArchiveVideos.css({transform:"scale(0)"}),tagFilterTimeout=setTimeout(function(){directorArchiveVideos.hide().filter(".tag-"+e).show(),tagFilterTimeout2=setTimeout(function(){directorArchiveVideos.filter(".tag-"+e).css({transform:"scale(1)"})},fastAnimationSpeed)},fastAnimationSpeed)):(clearTimeout(tagFilterTimeout),clearTimeout(tagFilterTimeout2),directorArchiveVideos.css({transform:"scale(0)"}),tagFilterTimeout=setTimeout(function(){directorArchiveVideos.hide().show(),tagFilterTimeout2=setTimeout(function(){directorArchiveVideos.css({transform:"scale(1)"})},fastAnimationSpeed)},fastAnimationSpeed))}),sidebarButton.on("click",function(){sidebar.hasClass("open")?(sidebar.removeClass("open"),sidebarButton.attr("class","u-pointer")):(sidebar.addClass("open"),sidebarButton.attr("class","u-pointer rotate"))}),$("body").hasClass("single-director")&&(window.onhashchange=function(){var e=window.location.hash.replace("#","");router("director",e)},window.location.hash)){var e=window.location.hash.replace("#","");router("director",e)}});